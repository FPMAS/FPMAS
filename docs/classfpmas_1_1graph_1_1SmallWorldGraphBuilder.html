<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fpmas: fpmas::graph::SmallWorldGraphBuilder&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="fpmas_logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">fpmas<span id="projectnumber">&#160;1.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefpmas.html">fpmas</a></li><li class="navelem"><a class="el" href="namespacefpmas_1_1graph.html">graph</a></li><li class="navelem"><a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html">SmallWorldGraphBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">fpmas::graph::SmallWorldGraphBuilder&lt; T &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="small__world__graph__builder_8h_source.html">small_world_graph_builder.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for fpmas::graph::SmallWorldGraphBuilder&lt; T &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classfpmas_1_1graph_1_1SmallWorldGraphBuilder__inherit__graph.png" border="0" usemap="#afpmas_1_1graph_1_1SmallWorldGraphBuilder_3_01T_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="afpmas_1_1graph_1_1SmallWorldGraphBuilder_3_01T_01_4_inherit__map" id="afpmas_1_1graph_1_1SmallWorldGraphBuilder_3_01T_01_4_inherit__map">
<area shape="rect" title=" " alt="" coords="15,95,187,136"/>
<area shape="rect" href="classfpmas_1_1api_1_1graph_1_1DistributedGraphBuilder.html" title=" " alt="" coords="5,5,196,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for fpmas::graph::SmallWorldGraphBuilder&lt; T &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classfpmas_1_1graph_1_1SmallWorldGraphBuilder__coll__graph.png" border="0" usemap="#afpmas_1_1graph_1_1SmallWorldGraphBuilder_3_01T_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="afpmas_1_1graph_1_1SmallWorldGraphBuilder_3_01T_01_4_coll__map" id="afpmas_1_1graph_1_1SmallWorldGraphBuilder_3_01T_01_4_coll__map">
<area shape="rect" title=" " alt="" coords="15,95,187,136"/>
<area shape="rect" href="classfpmas_1_1api_1_1graph_1_1DistributedGraphBuilder.html" title=" " alt="" coords="5,5,196,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab84d2e27407a7fa5d8fb51f0e5b0e97c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html#ab84d2e27407a7fa5d8fb51f0e5b0e97c">SmallWorldGraphBuilder</a> (float p, std::size_t k)</td></tr>
<tr class="separator:ab84d2e27407a7fa5d8fb51f0e5b0e97c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ed8e89840fd652e1055987ef7a4661"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedNode.html">api::graph::DistributedNode</a>&lt; T &gt; * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html#ac0ed8e89840fd652e1055987ef7a4661">build</a> (<a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedNodeBuilder.html">api::graph::DistributedNodeBuilder</a>&lt; T &gt; &amp;node_builder, <a class="el" href="namespacefpmas_1_1api_1_1graph.html#a6ad1b60906b20514825a6f77b7fdc750">api::graph::LayerId</a> layer, <a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedGraph.html">api::graph::DistributedGraph</a>&lt; T &gt; &amp;graph) override</td></tr>
<tr class="separator:ac0ed8e89840fd652e1055987ef7a4661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab9ca73d68b8029ae4120941edad62d"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; <a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedNode.html">api::graph::DistributedNode</a>&lt; T &gt; * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedGraphBuilder.html#aeab9ca73d68b8029ae4120941edad62d">build</a> (<a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedNodeBuilder.html">DistributedNodeBuilder</a>&lt; T &gt; &amp;node_builder, <a class="el" href="namespacefpmas_1_1api_1_1graph.html#a6ad1b60906b20514825a6f77b7fdc750">LayerId</a> layer, <a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedGraph.html">DistributedGraph</a>&lt; T &gt; &amp;graph)=0</td></tr>
<tr class="separator:aeab9ca73d68b8029ae4120941edad62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T&gt;<br />
class fpmas::graph::SmallWorldGraphBuilder&lt; T &gt;</div><p >A distributed procedure to build <a href="https://en.wikipedia.org/wiki/Small-world_network">Small World graphs</a>, inspired from the work of Duncan J. Watts and Steven H. Strogatz. The <a href="https://en.wikipedia.org/wiki/Watts%E2%80%93Strogatz_model">original procedure</a> as been adapted to support directed graphs.</p>
<p >We consider a node count <code>N</code>, a mean output degree <code>K</code> (supposed to be even), and a probability <code>p</code>.</p><ol type="1">
<li>Build <code>N</code> nodes, and connect them in a CYCLE as specified in the <a class="el" href="classfpmas_1_1graph_1_1RingGraphBuilder.html">RingGraphBuilder</a>. <code>K/2</code> is used as a parameter for the <a class="el" href="classfpmas_1_1graph_1_1RingGraphBuilder.html">RingGraphBuilder</a>, so that each node as <code>K</code> outgoing neighbors in total (<code>K/2</code> on each side).</li>
<li>Consider each edge, and select it for rewiring with a probability <code>p</code>. If selected, chose if target or source will be rewired with a probability <code>0.5</code>.</li>
<li>Rewires all edges that need a new target. The new target is chosen randomly among all the nodes. Nothing is done if the randomly selected new target corresponds to the current source, of if an edge already exists from the current source to the selected target.</li>
<li>Synchronization barrier</li>
<li>Analog procedure for all edges that need a new source.</li>
</ol>
<h1><a class="anchor" id="autotoc_md1"></a>
Explanations</h1>
<ul>
<li>It is necessary to randomly chose which side of each edge to rewire, to prevent all nodes to have exactly <code>K</code> outgoing neighbors at the end of the process.</li>
<li>The synchronization barrier prevents concurrency issues. For example, during step 3, it is not possible for any process other that the current one to build a new outgoing edge from the current source, since only new targets are selected, so that it is safe to check for existing outgoing edges.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Example</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter"></th><th class="markdownTableHeadNone" colspan="2">n=16, k=4, p=0.1    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Global   </td><td class="markdownTableBodyNone" colspan="2"><img src="small_world_n16_k4_p01.png" alt="" class="inline" title="n=16, k=4"/>      </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter" rowspan="2">Distributed   </td><td class="markdownTableBodyNone"><img src="small_world_n16_k4_p01_0.png" alt="" class="inline" title="n=16, k=4, 0"/>     </td><td class="markdownTableBodyNone"><img src="small_world_n16_k4_p01_1.png" alt="" class="inline" title="n=16, k=4, 1"/>      </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><img src="small_world_n16_k4_p01_2.png" alt="" class="inline" title="n=16, k=4, 2"/>     </td><td class="markdownTableBodyNone"><img src="small_world_n16_k4_p01_3.png" alt="" class="inline" title="n=16, k=4, 3"/>     </td></tr>
</table>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab84d2e27407a7fa5d8fb51f0e5b0e97c" name="ab84d2e27407a7fa5d8fb51f0e5b0e97c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab84d2e27407a7fa5d8fb51f0e5b0e97c">&#9670;&nbsp;</a></span>SmallWorldGraphBuilder()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html">fpmas::graph::SmallWorldGraphBuilder</a>&lt; T &gt;::SmallWorldGraphBuilder </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p ><a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html">SmallWorldGraphBuilder</a> constructor.</p>
<p >Notice that the node count is deduced from the count of nodes available in the node builder passed to the <a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html#ac0ed8e89840fd652e1055987ef7a4661">build()</a> method.</p>
<p >In order to respect the Small World assumptions, it is supposed that <code>k</code> is even and <code>N &gt;&gt; k &gt;&gt; ln(N)</code>. With <code>p=0</code>, the graph will be perfectly regular, with <code>p=1</code>, it will be completely random. In practice, low values of <code>p</code> (like <code>p=0.1</code>) are enough to expose the small world properties without falling in a completely random graph. The intuitive reason for that is that the idea of random rewiring is to create some shortcuts across the original ring to reduce distance from initially far nodes, and only a few are required to globally reduce lengths of paths in the graph, while preserving a high clustering coefficient.</p>
<p >The build process uses the <a class="el" href="classfpmas_1_1graph_1_1RandomGraphBuilder.html#aec213fb2cd1c77e229b548b9160481e9">RandomGraphBuilder::distributed_rd</a>, so the process can be seeded with <a class="el" href="classfpmas_1_1graph_1_1RandomGraphBuilder.html#a4563c87d992fa9082f306eeff919a633">RandomGraphBuilder::seed()</a> or <a class="el" href="namespacefpmas.html#a3ef0a8b9bd8de597a399b5c0d35ac1ec">fpmas::seed()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>probability of rewriring each edge </td></tr>
    <tr><td class="paramname">k</td><td>initial output degree of each node (assumed to be even) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac0ed8e89840fd652e1055987ef7a4661" name="ac0ed8e89840fd652e1055987ef7a4661"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0ed8e89840fd652e1055987ef7a4661">&#9670;&nbsp;</a></span>build()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedNode.html">api::graph::DistributedNode</a>&lt; T &gt; * &gt; <a class="el" href="classfpmas_1_1graph_1_1SmallWorldGraphBuilder.html">fpmas::graph::SmallWorldGraphBuilder</a>&lt; T &gt;::build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedNodeBuilder.html">api::graph::DistributedNodeBuilder</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>node_builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefpmas_1_1api_1_1graph.html#a6ad1b60906b20514825a6f77b7fdc750">api::graph::LayerId</a>&#160;</td>
          <td class="paramname"><em>layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedGraph.html">api::graph::DistributedGraph</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>graph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Automatically builds the specified graph according to the current implementation.</p>
<p >Nodes are generated using the specified <a class="el" href="classfpmas_1_1graph_1_1DistributedNodeBuilder.html">DistributedNodeBuilder</a>. More precisely, <a class="el" href="classfpmas_1_1graph_1_1DistributedNodeBuilder.html#a8602465a1f6cb347dd0f8b6b3b30ac14">DistributedNodeBuilder::localNodeCount()</a> nodes will be inserted in the graph. Generated nodes can then be linked on the specified layer, according to rules defined by the implemented algorithm.</p>
<p >Notice that the specified graph is not required to be empty.</p>
<p >Contrary to the GraphBuilder, this process is <b>synchronous</b> and should be called from <b>all</b> processes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_builder</td><td><a class="el" href="classfpmas_1_1graph_1_1DistributedNodeBuilder.html">DistributedNodeBuilder</a> instance used to generate nodes </td></tr>
    <tr><td class="paramname">layer</td><td>layer on which nodes will be linked </td></tr>
    <tr><td class="paramname">graph</td><td>graph in which nodes and edges will be inserted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>built nodes </dd></dl>

<p>Implements <a class="el" href="classfpmas_1_1api_1_1graph_1_1DistributedGraphBuilder.html#aeab9ca73d68b8029ae4120941edad62d">fpmas::api::graph::DistributedGraphBuilder&lt; T &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/fpmas/graph/<a class="el" href="small__world__graph__builder_8h_source.html">small_world_graph_builder.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
